"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7694:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var r={};t.r(r),t.d(r,{POST:()=>p});var o=t(9303),a=t(8716),n=t(670),u=t(474),i=t(7070);async function p(e){try{let{email:s,password:t}=await e.json(),r=(0,u._)();if(!s||!t)return i.NextResponse.json({success:!1,error:"Email et mot de passe requis"},{status:400});let{data:o,error:a}=await r.auth.signInWithPassword({email:s,password:t});if(a)return i.NextResponse.json({success:!1,error:a.message},{status:401});let{data:n,error:p}=await r.from("profiles").select("*").eq("id",o.user.id).single();if(p)return i.NextResponse.json({success:!1,error:"Profil non trouv\xe9"},{status:404});return i.NextResponse.json({success:!0,data:{user:n,token:o.session?.access_token}})}catch(e){return i.NextResponse.json({success:!1,error:"Erreur serveur"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"/workspaces/Product_simulation/app/api/auth/login/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:h}=c,m="/api/auth/login/route";function g(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}},474:(e,s,t)=>{t.d(s,{_:()=>n});var r=t(7857);let o="https://bidegooohfnxmmbuyttc.supabase.co",a=process.env.SUPABASE_SERVICE_ROLE_KEY;function n(){if(!o||!a)throw Error("Missing Supabase server environment variables");return(0,r.eI)(o,a,{auth:{autoRefreshToken:!1,persistSession:!1}})}o&&a&&(0,r.eI)(o,a,{auth:{autoRefreshToken:!1,persistSession:!1}})}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,564],()=>t(7694));module.exports=r})();